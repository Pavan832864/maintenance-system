<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Maintenance Request Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-top">
                    <h1>Admin Dashboard</h1>
                    <a href="/" class="btn btn-secondary btn-small">Back to User View</a>
                </div>
                <p class="subtitle">Maintenance Request Management System - Admin Panel</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Statistics Section -->
            <section class="section admin-stats">
                <h2>Statistics Overview</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon total">
                            <span>üìã</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Total Requests</p>
                            <p class="stat-value" id="totalRequests">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon pending">
                            <span>‚è≥</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Pending</p>
                            <p class="stat-value" id="pendingRequests">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon in-progress">
                            <span>‚öôÔ∏è</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">In Progress</p>
                            <p class="stat-value" id="inProgressRequests">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon resolved">
                            <span>‚úì</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Resolved</p>
                            <p class="stat-value" id="resolvedRequests">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon closed">
                            <span>‚úì‚úì</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Closed</p>
                            <p class="stat-value" id="closedRequests">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon critical">
                            <span>üî¥</span>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Critical Priority</p>
                            <p class="stat-value" id="criticalRequests">0</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Priority Breakdown Section -->
            <section class="section admin-priority">
                <h2>Priority Breakdown</h2>
                <div class="priority-grid">
                    <div class="priority-item">
                        <span class="priority-color critical-dot"></span>
                        <span class="priority-label">Critical:</span>
                        <span class="priority-count" id="priorityCritical">0</span>
                    </div>
                    <div class="priority-item">
                        <span class="priority-color high-dot"></span>
                        <span class="priority-label">High:</span>
                        <span class="priority-count" id="priorityHigh">0</span>
                    </div>
                    <div class="priority-item">
                        <span class="priority-color medium-dot"></span>
                        <span class="priority-label">Medium:</span>
                        <span class="priority-count" id="priorityMedium">0</span>
                    </div>
                    <div class="priority-item">
                        <span class="priority-color low-dot"></span>
                        <span class="priority-label">Low:</span>
                        <span class="priority-count" id="priorityLow">0</span>
                    </div>
                </div>
            </section>

            <!-- Requests Management Section -->
            <section class="section admin-requests">
                <div class="section-header">
                    <h2>All Maintenance Requests</h2>
                    <button id="adminRefreshBtn" class="btn btn-secondary">Refresh Data</button>
                </div>

                <div id="adminFilterControls" class="filter-controls">
                    <input type="text" id="adminSearchInput" placeholder="Search by title..." class="search-input">
                    <select id="adminStatusFilter" class="filter-select">
                        <option value="">All Statuses</option>
                        <option value="Pending">Pending</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Resolved">Resolved</option>
                        <option value="Closed">Closed</option>
                    </select>
                    <select id="adminPriorityFilter" class="filter-select">
                        <option value="">All Priorities</option>
                        <option value="Critical">Critical</option>
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low">Low</option>
                    </select>
                </div>

                <div id="adminRequestsList" class="requests-list">
                    <p class="loading">Loading requests...</p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 Maintenance Request Management System | Cloud DevOpsSec Project - Admin Panel</p>
        </footer>
    </div>

    <!-- Edit Modal (reused from main) -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Maintenance Request</h2>
            <form id="editForm" class="form">
                <input type="hidden" id="editId" name="editId">

                <div class="form-group">
                    <label for="editTitle">Title</label>
                    <input type="text" id="editTitle" name="editTitle" minlength="3" maxlength="255">
                </div>

                <div class="form-group">
                    <label for="editDescription">Description</label>
                    <textarea id="editDescription" name="editDescription" minlength="10"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editStatus">Status</label>
                        <select id="editStatus" name="editStatus">
                            <option value="Pending">Pending</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Resolved">Resolved</option>
                            <option value="Closed">Closed</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editPriority">Priority</label>
                        <select id="editPriority" name="editPriority">
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                </div>

                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                </div>
            </form>
            <div id="editMessage" class="message"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='admin.js') }}"></script>
</body>
</html>
